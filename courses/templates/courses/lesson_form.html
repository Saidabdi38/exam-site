{% extends "base.html" %}

{% block content %}

<div class="container" style="max-width:820px;">

<h2>Add Lesson — {{ course.title }}</h2>

<form method="post">
    {% csrf_token %}

    <!-- ✅ CHAPTER (NEW) -->
    <label><strong>Chapter</strong></label>
    <select name="chapter" class="form-control">
        <option value="">-- No Chapter --</option>

        {% for ch in chapters %}
            <option value="{{ ch.id }}">
                {{ ch.order }}. {{ ch.title }}
            </option>
        {% endfor %}
    </select>

    <br>

    <!-- TITLE -->
    <label><strong>Lesson Title</strong></label>
    <input type="text"
           name="title"
           required
           class="form-control">

    <br>

    <!-- CONTENT -->
    <label><strong>Content</strong></label>
    <textarea name="content"
              rows="8"
              required
              class="form-control"></textarea>

    <br>

    <!-- ✅ PUBLISH -->
    <label style="display:flex;gap:8px;align-items:center;">
        <input type="checkbox"
               name="is_published"
               checked>
        Published
    </label>

    <!-- ✅ STUDENT VISIBILITY -->
    <label style="display:flex;gap:8px;align-items:center;margin-top:6px;">
        <input type="checkbox"
               name="allow_students_view"
               checked>
        Allow students to view this lesson
    </label>

    <br>

    <button class="btn btn-primary">
        Save Lesson
    </button>

    <a class="btn btn-secondary"
       href="{% url 'courses:course_dashboard' course.id %}">
       Cancel
    </a>

</form>

</div>

{% endblock %}