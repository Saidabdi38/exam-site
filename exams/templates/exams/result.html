{% extends "base.html" %}
{% block content %}

<h2>Result: {{ attempt.exam.title }}</h2>

<p>Score: <strong>{{ attempt.score }}</strong> / {{ attempt.max_score }}</p>
<p>Percentage: <strong>{{ percentage }}%</strong></p>
<p>Result: <strong>{{ result }}</strong></p>
<p>Submitted: {{ attempt.submitted_at }}</p>

<hr>

{% for a in answers %}
  <div style="border:1px solid #ddd; padding:12px; margin:10px 0;">

    <!-- ✅ Bank Question -->
    <p><strong>{{ a.bank_question.text }}</strong></p>

    <!-- ✅ Student Answer -->
    <p>
      Your answer:
      {{ a.selected_bank_choice.text|default:"(no answer)" }}
    </p>

    <!-- ✅ Correct / Incorrect -->
    {% if a.selected_bank_choice %}
      {% if a.selected_bank_choice.is_correct %}
        <p style="color:green;">Correct</p>
      {% else %}
        <p style="color:red;">Incorrect</p>
      {% endif %}
    {% endif %}

  </div>
{% endfor %}

<a href="{% url 'exam_list' %}">Back to exams</a>

{% endblock %}