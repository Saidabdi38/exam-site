{% extends "base.html" %}
{% block content %}
<h2>Attempts: {{ exam.title }}</h2>

<p>
  <a href="{% url 'teacher_exam_detail' exam.id %}">Back to exam</a> |
  <a href="{% url 'teacher_dashboard' %}">Dashboard</a>
</p>

<hr>

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>#</th>
      <th>Student</th>
      <th>Started</th>
      <th>Submitted</th>
      <th>Score</th>
      <th>Percentage</th>
      <th>Result</th>
      <th>Status</th>
      <th>View</th>
    </tr>
  </thead>
  <tbody>
    {% for a in attempts %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ a.user.username }}</td>
        <td>{{ a.started_at }}</td>
        <td>{{ a.submitted_at|default:"-" }}</td>
        <td>{{ a.score }} / {{ a.max_score }}</td>
        <td>{{ a.percentage }}%</td>
        <td>
          {% if a.result == "PASS" %}
            <span style="color:green; font-weight:bold;">PASS</span>
          {% else %}
            <span style="color:red; font-weight:bold;">FAIL</span>
          {% endif %}
        </td>
        <td>{% if a.is_submitted %}Submitted{% else %}In progress{% endif %}</td>
        <td>
          <a href="{% url 'teacher_attempt_detail' exam.id a.id %}">Details</a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="9">No attempts yet.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
