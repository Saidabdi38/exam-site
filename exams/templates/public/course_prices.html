{% extends "base.html" %}
{% block title %}Courses{% endblock %}

{% block content %}

<div class="container">

    <h1>ğŸ“ Available Courses</h1>
    <p>Select a course and start learning.</p>

    <div style="
        display:grid;
        grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
        gap:20px;
    ">

        {% for course in courses %}
        <div class="card" style="padding:16px;">

            <!-- ================= TITLE ================= -->
            <h3>{{ course.title }}</h3>

            <!-- ================= DESCRIPTION ================= -->
            {% if course.overview %}
                <p style="color:#6b7280;">
                    {{ course.overview|truncatewords:20 }}
                </p>
            {% else %}
                <p style="color:#6b7280;">
                    Course description not available.
                </p>
            {% endif %}

            <!-- ================= PRICE ================= -->
            <h2 style="margin:12px 0;color:var(--primary);">
                {% if course.price == 0 %}
                    Free Course
                {% else %}
                    ${{ course.price }}
                {% endif %}
            </h2>

            <!-- ================= BUTTONS ================= -->
            <div style="display:flex;gap:8px;flex-wrap:wrap;">

                <!-- âœ… VIEW COURSE DETAILS -->
                <a href="{% url 'courses:course_detail' course.id %}"
                   class="btn btn-secondary">
                   ğŸ‘ View Course
                </a>

                {% if user.is_authenticated %}

                    <!-- âœ… START LEARNING -->
                    <a href="{% url 'courses:course_dashboard' course.id %}"
                       class="btn btn-primary">
                       â–¶ Start Learning
                    </a>

                <!-- {% else %} -->

                    <!-- LOGIN -->
                    <!-- <a href="{% url 'login' %}?next={% url 'courses:course_dashboard' course.id %}"
                       class="btn btn-primary">
                       Login
                    </a> -->

                    <!-- SIGNUP -->
                    <!-- <a href="{% url 'signup' %}?next={% url 'courses:course_dashboard' course.id %}"
                       class="btn btn-secondary">
                       Sign Up
                    </a> -->

                {% endif %}

            </div>

        </div>

        {% empty %}
            <p>No courses available.</p>
        {% endfor %}

    </div>

</div>

{% endblock %}